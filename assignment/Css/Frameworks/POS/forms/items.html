<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!--  <link rel="stylesheet" href="../../../../../assets/fonts/fontawesome-free-6.1.2-web/css/all.min.css">-->
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;800&family=Public+Sans:wght@600&family=Raleway:wght@500;600;700;800;900&display=swap"
        rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <style>
    body {
      background-color: #8FC3BA;
      height: 100vh;
    }

    * {
      font-family: 'Poppins', Sans-serif;
      font-style: normal;
      font-weight: 600;

    }

    main > h1 {
      font-family: 'Mukta Mahee';
      font-style: normal;
      font-weight: 600;
      font-size: 43px;
    }
  </style>
</head>
<body>

<main class="container mt-5">
  <div class="position-absolute ">
    <button class="btn btn-primary bg-transparent border-0" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions"><i
            class="fa-solid fa-bars text-dark " style="font-size:30px;"></i></button>
    <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
         aria-labelledby="offcanvasWithBothOptionsLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link " href="../index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " aria-current="page" href="customers.html">Customers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="items.html">Items</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="orders.html">Order</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <h1 class="ms-5 position-relative" style="bottom: 3px; left: 10px;"><u>ITEMS</u></h1>
  <section class="row">
    <div class="col-sm-12 col-4 col-lg-5 mt-5 col-xl-4">
      <h4 class="rounded-3 p-2 bg-opacity-25 bg-success"
          style="  border: 1px solid black;">Search Item</h4>

      <div class=" col-7 mt-4 mb-3 ">
        <select class="form-select bg-transparent " aria-label="Default select example">
          <option selected class="col-8">Item Code/Name</option>
          <option value="1">Name</option>
          <option value="3">Code</option>
        </select>
      </div>

      <div class="form-floating input-group mt-1 mb-3 col-10">
        <input type="email" class="form-control bg-transparent" id="itemSearch" placeholder="2000072501233">
        <label for="itemSearch">Name</label>
<!--        <button class="btn btn-outline-secondary text-dark bg-opacity-75" type="button" id="button-addon2"-->
<!--                style="background-color: #905FCAC7">Search-->
<!--        </button>-->
        <button type="button" class="btn btn-outline-secondary text-dark bg-opacity-75" data-bs-toggle="modal" data-bs-target="#exampleModal" style="background-color: #905FCAC7" id="searchIBtn">search</button>
      </div>
      <button type="button" class="btn btn-danger  me-2" id="deleteIBtn">Delete</button>
<!--      <button type="button" class="btn btn-warning me-2">Update</button>-->
      <button type="button" class="btn btn-success me-2" id="btnIClear">Clear</button>
    </div>

    <div class="row col-sm-12 col-6 col-lg-6 col-xl-6">
      <div class="col-6 position-relative " style="top:40px; left: 480px;">
        <h5>Item Code</h5>
        <h6 class="text-muted">I00-001</h6>

        <h5>Item Name</h5>
        <h6 class="text-muted">Coca-Cola</h6>

        <h5>Item Description</h5>
        <h6 class="text-muted">Bevarage</h6>

          <h5>Item Price</h5>
          <h6 class="text-muted">160</h6>


          <h5>Item Quntity</h5>
          <h6 class="text-muted">1000</h6>

      </div>

    </div>

    <div class="col-sm-5 col-2 col-xl-2">
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-dark col-sm-12" data-bs-toggle="modal" data-bs-target="#exampleModal">+
        Add Item
      </button>

      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
           aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Add Item</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <section class="container">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="itemCode" placeholder="I00-001">
                  <label for="itemCode">Item Code</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="itemName" placeholder="Biscuits">
                  <label for="itemName">Item Name</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="itemDescription"
                         placeholder="Sample Description">
                  <label for="itemDescription">Item Description</label>
                </div>

                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="itemPrice" placeholder="160">
                  <label for="itemPrice">Item Price</label>
                </div>

<!--                <div class="form-floating mb-3">-->
<!--                  <input type="text" class="form-control" id="itemSellingPrice" placeholder="Rs.20000/=">-->
<!--                  <label for="itemSellingPrice">Item Selling-Price</label>-->
<!--                </div>-->

                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="itemQty" placeholder="1000">
                  <label for="itemQty">Item Qty</label>
                </div>

              </section>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-warning me-2" id="btnIUpdate">Update</button>
              <button type="button" class="btn btn-success" id="saveItem">Save Item</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <section class="row mt-sm-2 ">
    <div class="col-12   text-sm-end text-lg-end ">
      <button type="button" class="btn btn-primary text-sm-end " id="viewAllItem">View All Items</button>
    </div>
    <div class="col-12 mt-5">
      <table class="table mt-3 table-hover">
        <thead class="" style="border-radius: 10px; background: rgba(55, 38, 39, 0.31)">
        <tr>

          <th scope="col">Item Code</th>
          <th scope="col">Item Name</th>
          <th scope="col">Item Description</th>
          <th scope="col">Item Price</th>
          <th scope="col">Item Qty</th>
        </tr>
        </thead>
        <tbody id="itemTbody">
        <tr>

          <td>I00-001</td>
          <td>Coca-Cola</td>
          <td>Bevarage</td>
          <td>160</td>
          <td>1000</td>
        </tr>
        <tr>

          <td>I00-002</td>
          <td>Cashuew</td>
          <td>Nutrition</td>
          <td>200</td>
          <td>2000</td>
        </tr>

        </tbody>
      </table>
    </div>
  </section>
</main>
<script src="../assets/js/bootstrap.min.js"></script>
<script>
  //save item
  var itemArray=[]

  function saveItems(){
    let itemCode=$("#itemCode").val()
    let itemName=$("#itemName").val()
    let itemDes=$("#itemDescription").val()
    let itemPrice=$("#itemPrice").val()
    let itemQty=$("#itemQty").val()

    var itemObjet={itemCode,itemName,itemDes,itemPrice,itemQty}

    itemArray.push(itemObjet)
    console.log(itemArray)
  }

  $("#saveItem").click(function (){
    alert("Item Saved")
    saveItems()
    loadItem()
    bindRowClickEvents()
    clear()
  })

  //load item
  function loadItem(){
    for(var i of itemArray){
      var rawc=`<tr><td>${i.itemCode}</td><td>${i.itemName}</td><td>${i.itemDes}</td><td>${i.itemPrice}</td><td>${i.itemQty}</td></tr>`
      $("#itemTbody").append(rawc)
    }
  }

  $("#viewAllItem").click(function () {
    loadItem()
  });

  //table row val select
  function bindRowClickEvents() {
    $("#itemTbody>tr").click(function () {
      let Icode = $(this).children(":eq(0)").text();
      let Iname = $(this).children(":eq(1)").text();
      let Des = $(this).children(":eq(2)").text();
      let price = $(this).children(":eq(3)").text();
      let qty = $(this).children(":eq(4)").text();


      $('#itemCode').val(Icode);
      $('#itemName').val(Iname);
      $('#itemDescription').val(Des);
      $('#itemPrice').val(price);
      $('#itemQty').val(qty);


    });
  }

  //clear inputField
  function clear(){
    $('#itemCode').val('')
    $('#itemName').val('')
    $('#itemDescription').val('')
    $('#itemPrice').val('')
    $('#itemQty').val('')

  }





  $("#searchIBtn").click(function () {
    let typeCode=$("#itemSearch").val()
    let item = searchItem(typeCode);
    if (item != null) {
      $("#itemCode").val(item.itemCode);
      $("#itemName").val(item.itemName);
      $("#itemDescription").val(item.itemDes);
      $("#itemPrice").val(item.itemPrice);
      $("#itemQty").val(item.itemQty);

    }else {
      alert("error")
    }

  });
  function searchItem(itemId) {
    for (let item of itemArray) {
      if (item.itemCode == itemId) {
        return item;
      }
    }
    return null;
  }
  function setTestifiedValues(Icode, Iname, Des, price,qty) {
    $("#itemCode").val(Icode);
    $("#itemName").val(Iname);
    $("#itemDescription").val(Des);
    $("#itemPrice").val(price);
    $("#itemQty").val(qty);

  }

  //update customer
  $('#btnIUpdate').click(function(){
    let ItemCode=$('#itemCode').val()
    let response=updateItem(ItemCode)
    if(response){
      // Swal.fire({
      //   title: 'Customer Updated Successfully',
      // })
      alert("updated")
      $('#itemCode').val('')
      $('#itemName').val('')
      $('#itemDescription').val('')
      $('#itemPrice').val('')
      $('#itemQty').val('')

    }
    else{
      // Swal.fire("Update Failed" )
    }
  })

  function updateItem(itemCode) {
    let item = searchItem(itemCode);
    if (item != null) {
      item.itemCode = $("#itemDescription").val();
      item.itemName= $("#customerName").val();
      item.itemDes = $("#customerNIC").val();
      item.itemPrice = $("#customerDOB").val();
      item.itemQty= $("#customerAddress").val();

      loadItem()
      clear()
      setTestifiedValues()
      return true;
    } else {
      return false;
    }

  }

  //remove customer
  $("#deleteIBtn").click(function () {
    let deleteCode = $("#itemSearch").val();

    let del = confirm("Do you really want to delete item code :" + deleteCode);
    if (del){
      if (deleteItem(deleteCode)) {
        setTestifiedValues("", "", "", "","");
      } else {
        alert("No such customer to delete. please check the id");
      }
    }
  });

  function deleteItem(itemCode) {
    let item = searchItem(itemCode);
    if (item != null) {
      let indexNumber = itemArray.indexOf(item);
      item.splice(indexNumber, 1);
      loadItem();
      return true;
    } else {
      return false;
    }
  }
</script>
</body>
</html>